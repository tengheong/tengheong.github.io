L.Control.Sidebar=L.Control.extend({includes:L.Mixin.Events,options:{closeButton:!0,position:"left",autoPan:!0},initialize:function(a,b){L.setOptions(this,b);var c=this._contentContainer=L.DomUtil.get(a);c.parentNode.removeChild(c);var d="leaflet-",e=this._container=L.DomUtil.create("div",d+"sidebar "+this.options.position);if(L.DomUtil.addClass(c,d+"control"),e.appendChild(c),this.options.closeButton){var f=this._closeButton=L.DomUtil.create("a","close",e);f.innerHTML="&times;"}},addTo:function(a){var b=this._container,c=this._contentContainer;if(this.options.closeButton){var d=this._closeButton;L.DomEvent.on(d,"click",this.hide,this)}L.DomEvent.on(b,"transitionend",this._handleTransitionEvent,this).on(b,"webkitTransitionEnd",this._handleTransitionEvent,this);var e=a._controlContainer;e.insertBefore(b,e.firstChild),this._map=a;var f=L.DomEvent.stopPropagation,g=L.DomEvent._fakeStop||f;return L.DomEvent.on(c,"contextmenu",f).on(c,"click",g).on(c,"mousedown",f).on(c,"touchstart",f).on(c,"dblclick",g).on(c,"mousewheel",f).on(c,"MozMousePixelScroll",f),this},removeFrom:function(a){this.hide();var b=this._container,c=this._contentContainer,d=a._controlContainer;d.removeChild(b),this._map=null;var e=L.DomEvent.stopPropagation,f=L.DomEvent._fakeStop||e;if(L.DomEvent.off(c,"contextmenu",e).off(c,"click",f).off(c,"mousedown",e).off(c,"touchstart",e).off(c,"dblclick",f).off(c,"mousewheel",e).off(c,"MozMousePixelScroll",e),L.DomEvent.off(b,"transitionend",this._handleTransitionEvent,this).off(b,"webkitTransitionEnd",this._handleTransitionEvent,this),this._closeButton&&this._close){var g=this._closeButton;L.DomEvent.off(g,"click",this.hide,this)}return this},isVisible:function(){return L.DomUtil.hasClass(this._container,"visible")},show:function(){this.isVisible()||(L.DomUtil.addClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([-this.getOffset()/2,0],{duration:.5}),this.fire("show"))},hide:function(a){this.isVisible()&&(L.DomUtil.removeClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([this.getOffset()/2,0],{duration:.5}),this.fire("hide")),a&&L.DomEvent.stopPropagation(a)},toggle:function(){this.isVisible()?this.hide():this.show()},getContainer:function(){return this._contentContainer},getCloseButton:function(){return this._closeButton},setContent:function(a){var b=this.getContainer();if("string"==typeof a)b.innerHTML=a;else{for(;b.firstChild;)b.removeChild(b.firstChild);b.appendChild(a)}return this},getOffset:function(){return"right"===this.options.position?-this._container.offsetWidth:this._container.offsetWidth},_handleTransitionEvent:function(a){"left"!=a.propertyName&&"right"!=a.propertyName||this.fire(this.isVisible()?"shown":"hidden")}}),L.control.sidebar=function(a,b){return new L.Control.Sidebar(a,b)};